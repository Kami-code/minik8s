# Generated by iptables-save v1.8.4 on Sat May 28 16:01:35 2022
*mangle
:PREROUTING ACCEPT [18611:1564204]
:INPUT ACCEPT [18611:1564204]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [18633:1498160]
:POSTROUTING ACCEPT [18633:1498160]
COMMIT
# Completed on Sat May 28 16:01:35 2022
# Generated by iptables-save v1.8.4 on Sat May 28 16:01:35 2022
*nat
:PREROUTING ACCEPT [1617:97020]
:INPUT ACCEPT [1617:97020]
:OUTPUT ACCEPT [701:40401]
:POSTROUTING ACCEPT [701:40401]
:DOCKER - [0:0]
:KUBE-MARK-DROP - [0:0]
:KUBE-MARK-MASQ - [0:0]
:KUBE-NODEPORTS - [0:0]
:KUBE-POSTROUTING - [0:0]
:KUBE-SEP-QPJzAazhTvgY - [0:0]
:KUBE-SERVICES - [0:0]
:KUBE-SVC-ZqUuFDpNSJOA - [0:0]
:KUBE-SVC-qaQEDspsuzEs - [0:0]
-A PREROUTING -m comment --comment "kubernetes service portals" -j KUBE-SERVICES
-A PREROUTING -m addrtype --dst-type LOCAL -j DOCKER
-A OUTPUT -m comment --comment "kubernetes service portals" -j KUBE-SERVICES
-A OUTPUT ! -d 127.0.0.0/8 -m addrtype --dst-type LOCAL -j DOCKER
-A POSTROUTING -m comment --comment "kubernetes postrouting rules" -j KUBE-POSTROUTING
-A POSTROUTING -s 172.17.0.0/16 ! -o docker0 -j MASQUERADE
-A POSTROUTING -s 172.18.0.0/16 ! -o docker_gwbridge -j MASQUERADE
-A DOCKER -i docker0 -j RETURN
-A DOCKER -i docker_gwbridge -j RETURN
-A KUBE-MARK-DROP -j MARK --set-xmark 0x8000/0x8000
-A KUBE-MARK-MASQ -j MARK --set-xmark 0x4000/0x4000
-A KUBE-POSTROUTING -m comment --comment "kubernetes service traffic requiring SNAT" -m mark --mark 0x4000/0x4000 -j MASQUERADE
-A KUBE-SEP-QPJzAazhTvgY -p tcp -m tcp -j DNAT --to-destination 172.17.0.2:80
-A KUBE-SERVICES -d 18.1.1.1/32 -p tcp -m tcp --dport 80 -m comment --comment "dns-nginx-server-service: cluster IP" -j KUBE-SVC-qaQEDspsuzEs
-A KUBE-SERVICES -m comment --comment "kubernetes service nodeports; NOTE: this must be the last rule in this chain" -m addrtype --dst-type LOCAL -j KUBE-NODEPORTS
-A KUBE-SVC-ZqUuFDpNSJOA -j KUBE-SEP-QPJzAazhTvgY
COMMIT
# Completed on Sat May 28 16:01:35 2022
# Generated by iptables-save v1.8.4 on Sat May 28 16:01:35 2022
*filter
:INPUT ACCEPT [7229:703353]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [7235:674328]
:DOCKER - [0:0]
:DOCKER-ISOLATION-STAGE-1 - [0:0]
:DOCKER-ISOLATION-STAGE-2 - [0:0]
:DOCKER-USER - [0:0]
:KUBE-EXTERNAL-SERVICES - [0:0]
:KUBE-FIREWALL - [0:0]
:KUBE-FORWARD - [0:0]
:KUBE-SERVICES - [0:0]
-A INPUT -m comment --comment "kubernetes service portals" -m conntrack --ctstate NEW -j KUBE-SERVICES
-A INPUT -m comment --comment "kubernetes externally-visible servie portals" -m conntrack --ctstate NEW -j KUBE-EXTERNAL-SERVICES
-A INPUT -j KUBE-FIREWALL
-A FORWARD -m comment --comment "kubernetes forwarding rules" -j KUBE-FORWARD
-A FORWARD -m comment --comment "kubernetes service portals" -m conntrack --ctstate NEW -j KUBE-SERVICES
-A FORWARD -j DOCKER-USER
-A FORWARD -j DOCKER-ISOLATION-STAGE-1
-A FORWARD -o docker0 -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
-A FORWARD -o docker0 -j DOCKER
-A FORWARD -i docker0 ! -o docker0 -j ACCEPT
-A FORWARD -i docker0 -o docker0 -j ACCEPT
-A FORWARD -o docker_gwbridge -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT
-A FORWARD -o docker_gwbridge -j DOCKER
-A FORWARD -i docker_gwbridge ! -o docker_gwbridge -j ACCEPT
-A FORWARD -i docker_gwbridge -o docker_gwbridge -j DROP
-A OUTPUT -m comment --comment "kubernetes service portals" -m conntrack --ctstate NEW -j KUBE-SERVICES
-A OUTPUT -j KUBE-FIREWALL
-A DOCKER-ISOLATION-STAGE-1 -i docker0 ! -o docker0 -j DOCKER-ISOLATION-STAGE-2
-A DOCKER-ISOLATION-STAGE-1 -i docker_gwbridge ! -o docker_gwbridge -j DOCKER-ISOLATION-STAGE-2
-A DOCKER-ISOLATION-STAGE-1 -j RETURN
-A DOCKER-ISOLATION-STAGE-2 -o docker0 -j DROP
-A DOCKER-ISOLATION-STAGE-2 -o docker_gwbridge -j DROP
-A DOCKER-ISOLATION-STAGE-2 -j RETURN
-A DOCKER-USER -j RETURN
-A KUBE-FIREWALL -m comment --comment "kubernetes firewall for dropping marked packets" -m mark --mark 0x8000/0x8000 -j DROP
-A KUBE-FORWARD -m conntrack --ctstate INVALID -j DROP
-A KUBE-FORWARD -m comment --comment "kubernetes forwarding rules" -m mark --mark 0x4000/0x4000 -j ACCEPT
COMMIT
# Completed on Sat May 28 16:01:35 2022
